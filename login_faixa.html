<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Faixa Login</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:transparent !important;
  overflow:hidden;
}
#wrap{position:absolute;inset:0}

/* BASE AZUL */
#base{
  position:absolute; inset:0;
  --alpha: .8;
  background:linear-gradient(90deg,
    rgba(0,45,115,var(--alpha)) 0%,
    rgba(0,45,115,var(--alpha)) 75%,
    #ffffff 95%,
    #ffffff 100%
  );
}

/* OVERLAY (OK/ERRO) */
#overlay{
  position:absolute; inset:0;
  pointer-events:none;
  opacity:0;
  background:linear-gradient(90deg,
    rgba(var(--stateRGB),1) 0%,
    rgba(var(--stateRGB),1) 75%,
    #ffffff 95%,
    #ffffff 100%
  );
}

@keyframes derrete{
  0%{opacity:0}
  12%{opacity:1}
  100%{opacity:0}
}
.flash{ animation: derrete 4s ease-out 1 both; }
</style>
</head>

<body>
  <div id="wrap">
    <div id="base"></div>
    <div id="overlay"></div>
  </div>

<script>
const p = new URLSearchParams(location.search);

let alpha = Number(p.get("alpha") ?? 0.8);
alpha = Number.isFinite(alpha) ? Math.max(0, Math.min(1, alpha)) : 0.8;

const base = document.getElementById("base");
const overlay = document.getElementById("overlay");
base.style.setProperty("--alpha", alpha);

function getState(){
  // aceita "#erro" "#ok" "#normal"
  const h = (location.hash || "").replace("#","").trim().toLowerCase();
  return h || (p.get("state") || "normal").toLowerCase();
}

function applyState(state){
  let rgb = null;
  if(state === "erro") rgb = "212,0,0";
  if(state === "ok")   rgb = "0,164,16";

  // sempre “limpa” animação
  overlay.classList.remove("flash");

  if(rgb){
    overlay.style.setProperty("--stateRGB", rgb);
    // rearma
    void overlay.offsetWidth;
    overlay.classList.add("flash");
  }
}

// inicial
applyState(getState());

// muda sem reload
window.addEventListener("hashchange", () => {
  applyState(getState());
});
</script>
</body>
</html>
